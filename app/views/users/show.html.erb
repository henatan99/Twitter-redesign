<div class = "front flex-row">

<%= render './layouts/left' %>

<section class = "middle-col flex-column">
  
  <picture class = "back-img">
    <% if @user.coverimage %>
      <%= image_tag(@user.coverimage_url.to_s, width: "100%", height: "100%") %>       
    <% end %>
    <%= link_to 'Edit' %>
  </picture>  
  <%= render './layouts/frontmenu'%>
  
  <section class="opinions-section flex flex-column position-sticky">
    <span class="opinions-title font-fam"> ALL OPINIONS </span>
    <% @user.opinions.each do |opinion| %>
      <article class="opinion-story flex-row">
      <img class="opinion-profile"></img>
      <div class = "opinion-body font-fam">
          <h1> <%= opinion.author.fullname %> </h1>
          <p> <%= opinion.text %> </p>
      </div>
     </article>
    <% end %>
  </section>

</section>

<section class = "right-col flex-column">
  <div class="show-profile" >
        <div class="show-article flex flex-column">
            <div class="photo-wrapper flex-row flex">
              <% if current_user.follow?(@user) %>
                <a href="<%= unfollow_user_path(@user) %>">        
                  <span class="iconify font-1p5" data-icon="grommet-icons:subtract-circle" data-inline="false"></span>        
                </a>
              <% else %>
                <a href="<%= follow_user_path(@user) %>">
                    <span class="iconify" data-icon="carbon:add-alt" data-inline="false"></span>
                </a>
              <% end %>             
              <div class="user-img"> 
                <% if @user.photo %>
                  <%= image_tag(@user.photo_url.to_s, width: "100%", height: "100%") %> 
                <% end %>
              </div>
              <span class="iconify" data-icon="ion:list-circle-outline" data-inline="false"></span>
            </div>

            <div class="user-name flex-column">
                <h1> <%= @user.fullname %> </h1>
                <p>@ <%= @user.username %> </p>
            </div>        
        </div>

        <div class="show-following flex-row">
            <div class="follow-nums flex-column flex">
                <span> <%= @user.opinions.count %> </span>
                <p>Opinions</p>
            </div>
            <div class="follow-nums flex-column flex middle">
                <span> <%= @user.followeds.count %> </span>
                <p>Followings</p>
            </div>
            <div class="follow-nums flex-column flex">
                <span> <%= @user.followers.count %></span>
                <p>Followers</p>
            </div>
        </div>
  </div>
  <div class = "title flex font-1">
    <span>FOLLOWED BY</span>          
  </div>
  <div  class="who-to-section flex-column flex">
  <% @user.followers.each do |user| %>
    <% unless user == @user %> 
    <article class="who-to-story flex-row">
     <div class="who-to-profile img-div">
      <% if user.photo %>
      <%= image_tag(user.photo_url.to_s) %> 
      <% end %>
     </div>
     <div class = "who-to-body">
        <div class="name-follow-wrapper flex-coumn">
         <h1> <%= link_to user.fullname, user_path(user) %> </h1>
         <p> @ <%= user.username %> </p>         
        </div>
                      
      </div>
      <% if current_user.follow?(user) %>
        <a href="<%= unfollow_user_path(user) %>">        
          <span class="iconify font-1p5" data-icon="grommet-icons:subtract-circle" data-inline="false"></span>        
        </a>
      <% else %>
        <a href="<%= follow_user_path(user) %>">
          <span class="iconify font-1p5" data-icon="carbon:add-alt" data-inline="false"></span>
        </a>
      <% end %>
      
    </article>
    <% end %>
  <% end %>
  <div>
</section>
</div>